<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>督办管理-首页</title>
    <base href="../../">
    <!-- Bootstrap -->
    <link href="assets/css/font-awesome.min.css" rel="stylesheet">
    <link href="assets/css/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/daterangepicker.css" rel="stylesheet">   
    <link href="assets/css/supervision.css" rel="stylesheet">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
    <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
   
</head>
<body>
<!--head-->
<header>
    <com-header></com-header>
</header>
<!--head end-->
<img class="horizontal-line" src="assets/images/hori-line.png"/>
<article id="article">
    <p>督办管理</p>
<div class="location">
        <ul>
                <li class="item"><a href="">呵呵</a></li>
        </ul>
</div>
    <section class="details">
	<ul class="nav nav-tabs" role="tablist">
	    <li role="presentation"><a href="#">我的督办</a></li>
	    <li role="presentation"><a href="#supervisionDetail_panel" role="tab" data-toggle="tab">全部督办</a>
	    </li>
	    <li role="presentation" class="active"><a href="#createSupervision_panel" role="tab"
						      data-toggle="tab">新建督办</a></li>
	</ul>
	<div class="tab-content">
	    <div role="tabpanel" class="tab-pane fade" id="supervisionDetail_panel">
		<table class="table table-bordered">
		    <tr class="title1">
			<td colspan="6">督办明细</td>
		    </tr>
		    <tr class="title2">
			<td colspan="6">督办层级详情</td>
		    </tr>
		    <tr class="level-head">
			<td width="12%"></td>
			<td width="43%">督办名称</td>
			<td width="8%">责任领导</td>
			<td width="7%">责任人</td>
			<td width="10%">计划完成时间</td>
			<td width="20%">操作</td>
		    </tr>
		    <tr class="supervision-level">

			<td rowspan="{{children.length+1}}">
			    <div class="graph-unit">
				<div class="progress">
				    <div class="progress-bar progress-bar-success small-pro" role="progressbar"
					 aria-valuenow="{{latestTrace.rate}}"
					 aria-valuemin="0" aria-valuemax="100" :style="{width:latestTrace.rate+'%'}">
					{{latestTrace.rate}}%
				    </div>
				</div>
			    </div>
			    <template v-for="item in children">
				<div class="child-graph">
				    <div class="left"></div>
				    <div class="progress right">
					<div class="progress-bar progress-bar-success small-pro" role="progressbar"
					     aria-valuenow="{{item.latestTrace.rate}}" aria-valuemin="0"
					     aria-valuemax="100" :style="{width:item.latestTrace.rate+'%'}">
					    {{item.latestTrace.rate}}%
					</div>
				    </div>
				</div>
			    </template>			   
			</td>
			<td><p class="td-content">{{name}}</p></td>
			<td class="middle"><p>{{accountablename}}</p></td>
			<td class="middle"><p>{{responsiblename}}</p></td>
			<td class="middle"><p>{{estimatedcompletetiontime}}</p></td>
			<td class="middle">
			    <a href="" class="menu">新增子项</a>
			    <a href="">更新进度</a>
			</td>
		    </tr>

		    <tr class="supervision-level" v-for="item in children">
			<td><p class="td-content">{{item.name}}</p></td>
			<td class="middle"><p>{{item.accountablename}}</p></td>
			<td class="middle"><p>{{item.responsiblename}}</p></td>
			<td class="middle"><p>{{item.estimatedcompletetiontime}}</p></td>
			<td class="middle">
			    <a href="" class="menu">编辑</a>
			    <!-- /.menu --><a href="" class="menu">延期</a>
			    <!-- /.menu --><a href="" class="menu">撤销</a>
			    <!-- /.menu --><a href="" class="menu">关闭</a>
			    <!-- /.menu -->
			</td>
		    </tr>
		    <tr class="title2">
			<td colspan="6">都办任务详情</td>
		    </tr>
		    <tr>
			<td class="al-right">督办事项</td>
			<!-- /.al-right -->
			<td class="al-left" colspan="5"><p class="td-content">{{name}}</p></td>
			<!-- /.al-left -->
		    </tr>
		    <tr>
			<td class="al-right">督办事项编号</td>
			<!-- /.al-right -->
			<td class="al-left">{{code}}</td>
			<!-- /.al-left -->
			<td class="al-right" colspan="2">督办来源</td>
			<!-- /.al-right -->
			<td class="al-left" colspan="2">{{source}}</td>
			<!-- /.al-left -->
		    </tr>
		    <tr>
			<td class="al-right">领域</td>
			<!-- /.al-right -->
			<td class="al-left">{{area}}</td>
			<!-- /.al-left -->
			<td class="al-right" colspan="2">{{estimatedcompletetiontime}}</td>
			<!-- /.al-right -->
			<td class="al-left" colspan="2">2016-07-17</td>
			<!-- /.al-left -->
		    </tr>
		    <tr>
			<td class="al-right">责任领导</td>
			<!-- /.al-right -->
			<td class="al-left">{{accountablename}}</td>
			<!-- /.al-left -->
			<td class="al-right" colspan="2">紧急程度</td>
			<!-- /.al-right -->
			<td class="al-left" colspan="2">{{urgency}}</td>
			<!-- /.al-left -->
		    </tr>
		    <tr>
			<td class="al-right">责任部门</td>
			<!-- /.al-right -->
			<td class="al-left">安全质量部</td>
			<!-- /.al-left -->
			<td class="al-right" colspan="2">重要程度</td>
			<!-- /.al-right -->
			<td class="al-left" colspan="2">{{importance}}</td>
			<!-- /.al-left -->
		    </tr>
		    <tr>
			<td class="al-right">责任人</td>
			<!-- /.al-right -->
			<td class="al-left">{{responsiblename}}</td>
			<!-- /.al-left -->
			<td class="al-right" colspan="2">公开程度</td>
			<!-- /.al-right -->
			<td class="al-left" colspan="2">全部</td>
			<!-- /.al-left -->
		    </tr>
		    <tr>
			<td class="al-right">协办及通知部门</td>
			<td colspan="5">{{scope}}</td>
		    </tr>
		    <tr>
			<td class="al-right">备注</td>
			<td colspan="5">请尽快完成</td>
		    </tr>
		    <tr>
			<td class="al-right">督办来源链接</td>
			<td colspan="5"></td>
		    </tr>
		    <tr>
			<td class="al-right">附件</td>
			<td colspan="5"></td>
		    </tr>
		    <tr class="title2">
			<td colspan="6" class="al-right">执行进展</td>
		    </tr>
		    <!-- /.title2 -->
		    <tr>
			<td colspan="6" style="padding:0;">
			    <table class="table table-bordered pro-table ">
				<tr class="level-head">
				    <td>执行时间</td>
				    <td>执行人</td>
				    <td>进度</td>
				    <td width="50%">执行情况</td>
				</tr>
				<tr class="middle">
				    <td>{{latestTrace.updatetime}}</td>
				    <td>{{latestTrace.operatorname}}</td>
				    <td>{{latestTrace.rate}}%</td>
				    <td>{{latestTrace.description}}</td>
				</tr>
				<!-- /.level-head -->
			    </table>
			</td>
		    </tr>
		    <!-- /.level-head -->
		</table>
		<!-- /.table table-bordered -->
	    </div>
	    <div role="tabpanel" class="tab-pane fade in active create-supervision" id="createSupervision_panel">
		<table class="table table-bordered">

		    <tr class="title2">
			<td colspan="4">新增督办事项
			<span style="margin-left: 10rem">{{saveState}}</span>
			</td>
		    </tr>
		    <tr>
			<td width="13%" class="al-right">督办事项</td>
			<td colspan="3"><input type="text" style="width: 100%;" v-model="name"/></td>
		    </tr>
		    <tr>
			<td width="13%" class="al-right">督办编号</td>
			<td width="40%">{{code}}</td>
			<td width="13%" class="al-right">督办来源</td>
			<td width="34%">
			    <select class="form-control" v-model="sourceSelected">
				<option v-for="option in sourceOptions" :value="option.value">{{option.text}}</option>
			    </select>
			</td>
		    </tr>
		    <tr>
			<td width="13%" class="al-right">领域</td>
			<td width="40%">
			    <select class="form-control" v-model="areaSelected">
				<option v-for="option in areaOptions" :value="option.value">{{option.text}}</option>
			    </select>
			</td>
			<td width="13%" class="al-right">计划完成时间</td>
			<td width="34%">
			    <input type="text" class="form-control" id="completeDate" style="width: 50%;" 
			       v-model="estimatedcompletetiontime"    />
			</td>
		    </tr>
		      <tr>
			<td width="13%" class="al-right">责任领导(A)</td>
			<td width="40%">    
                        <style scoped>.outer-container{float: left;}</style>                            
                                <leader-select :supervision-request="requests" multiple="false" :selected.sync="leaders" leader-only="true"></leader-select><span style="float: left;margin-bottom: 0;margin-left:2rem;border:none;width: auto;vertical-align: middle;height: 3.3rem;line-height: 3.3rem;">{{accountablename}}</span>
                            </td>
			<td width="13%" class="al-right">紧急程度</td>
			<td width="34%">
			    <select class="form-control" v-model="urgency">
				<option v-for="option in urgencyOptions" :value="option.value">{{option.text}}</option>
			    </select>
			</td>
		    </tr>
		     <tr>
			<td width="13%" class="al-right">责任部门</td>
			<td width="40%">
			 <select class="form-control" v-model="responsibledeptcode">
				<option v-for="option in responsibledeptOptions" :value="option.value">{{option.text}}</option>
			    </select></td>
			<td width="13%" class="al-right">重要程度</td>
			<td width="34%">
			    <select class="form-control" v-model="importance">
				<option v-for="option in importanceOptions" :value="option.value">{{option.text}}</option>
			    </select>
			</td>
		    </tr>
		    <tr>
			<td width="13%" class="al-right">责任人(R)</td>
			<td width="40%">
			<input style="min-width: 50%;" v-model="responsiblename">
			</td>
			<td width="13%" class="al-right">公开范围</td>
			<td width="34%">
			    <select class="form-control" v-model="public">
				<option v-for="option in publicOptions" :value="option.value">{{option.text}}</option>
			    </select>
			</td>
		    </tr>
		    <tr>
			<td width="13%" class="al-right">协办及通知部门</td>
			<td colspan="3"><input style="width: 85%;height:3.3rem;display: inline-block;" v-model="scope"/>
		      <button type="button" class="btn  btn-sm" style="vertical-align: baseline;" data-toggle="modal" data-target="#deptModal">选择通知及协办部门</button>
			 </td>
		    </tr>
		    <tr>
			<td width="13%" class="al-right">备注</td>
			<td colspan="3" class="al-left"><textarea style="width: 100%;" v-model="comments"></textarea>
			 </td>
		    </tr>
		      <tr>
			<td width="13%" class="al-right">附件</td>
			<td colspan="3" class="al-left">
			<div  style="width: 100%;">
			    <button class="btn btn-default accessoryBtn">附件上传</button>
			    <!-- <file-uploader></file-uploader> -->
			</div>
			 </td>
		    </tr>
		</table>
		<div class="data-action" style="text-align: center;">
		    <button class="btn btn-default" @click="submit_handler" style="margin:0 5rem;">保存</button> 
		     <button class="btn btn-default" @click="" style="margin:0 5rem;">取消</button>
		</div>

<!-- Button trigger modal -->

<!-- Modal -->
<div class="modal fade" id="deptModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
	<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
	<h4 class="modal-title">部门列表</h4>
      </div>
      <div class="modal-body">
       <com-accordion :selected-Depts.sync="selectedDepts" :supervision-request="requests" multiple="true"></com-accordion>
      </div>
      <div class="modal-footer">
	<button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
	<!-- <button type="button" class="btn btn-primary">Save changes</button> -->
      </div>
    </div>
  </div>
</div>
<!--modal end-->

	    </div>
	</div>
    </section>
    </div>

</article>
<footer>
    <com-footer></com-footer>
</footer>

<script type="text/javascript" src="assets/libs/jquery.min.js"></script>
<script type="text/javascript" src="assets/libs/bootstrap.min.js"></script>
<script src="assets/libs/daterangepicker/moment.min.js"></script>
<script src="assets/libs/daterangepicker/daterangepicker.js"></script>
<script src="dist/supervision-detail.js"></script>
</body>
</html>