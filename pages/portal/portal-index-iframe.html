<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>公司门户</title>

    <!-- Bootstrap -->
    <base href="http://10.15.251.110/"/>
    <!-- <base href="../../"> -->
    <link href="assets/css/bootstrap/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/portal/portal-iframe.css"/>
</head>
<body onload="initIframe()">
<header>
    <img src="/images/portal/portal-logo.jpg" alt="" class="logo"/>
</header>
<article class="container-fluid article" id="article">
    <div>
        <div class="catalog-panel">
            <div class="catalog" style="border-bottom:0;">
                <div class="panel-online" style="margin-top: 0.5rem;">
                    <div class="catalog-online" style="margin-top: 1rem;">
                        <div class="scroll-panel-online">
                            <div class="scroll-icon-online up" id="goingUp">
                                <em class="glyphicon-online glyphicon-menu-up"></em>
                            </div>
                            <div class="online-list-div">
                                <ul class="online-list-ul" style="height: 79.5rem;" id="location">
                                    <li  id="tag01" name="1" class="selected-li" style="display: block;">秦山一期1#</li>
                                    <li id="tag02" name="2">秦山二期1#</li>
                                    <li id="tag03" name="3">秦山二期2#</li>
                                    <li id="tag04" name="4">秦山二期3#</li>
                                    <li id="tag05" name="5">秦山二期4#</li>
                                    <li id="tag06" name="6">秦山三期1#</li>
                                    <li id="tag07" name="7">秦山三期2#</li>
                                    <li id="tag08" name="8">田湾核电1#</li>
                                    <li id="tag09" name="9">田湾核电2#</li>
                                    <li id="tag10" name="10">福清核电1#</li>
                                    <li id="tag11" name="11">福清核电2#</li>
                                    <li id="tag12" name="12">方家山1#</li>
                                    <li id="tag13" name="13">方家山2#</li>
                                    <li id="tag14" name="14">海南核电1#</li>
                                </ul>
                            </div>

                            <div class="scroll-icon-online down" id="goingDown">
                                <em class="glyphicon-online glyphicon-menu-down"></em>
                            </div>
                        </div>
                    </div>
                    <div id="iframess" style="width: 50rem; height: 30rem; border: 0; margin-left: 2.5rem;">

                    </div>
                    <div style="width: 12rem; height: 100%; float: left; border: 0px;margin-left:1rem;">
                        <div class="online-power">
                            <div class="online-power-amount">
                                <span style="color:#00a2e5 ; font-size: 1.3rem;">总电功率</span>
                                <span id="p1" style="color:#0B0D8C; font-size: 1rem;">0.00MW</span>
                                <span id="p11" style="color:#0B0D8C; font-size: 1rem;">0.00%</span>
                                <span style="color:#00a2e5 ; font-size: 1.3rem;">总发电量</span>
                                <span id="p2" style="color:#0B0D8C; font-size: 1rem;">0.00亿度</span>
                                <span id="p22" style="color:#0B0D8C; font-size: 1rem;">0.00%</span>
                            </div>
                        </div>
                        <div class="online-power">
                            <div  class="online-power-amount" style="padding-top: 2rem;">
                                <span style="color:#00a2e5 ; font-size: 1.3rem; ">中国核电</span>
                                <span style="color:#00a2e5 ; font-size: 1.3rem;">［601985］</span>
                                <span id="stock" style="color:#0B0D8C; font-size: 1rem;">0.00</span>
                                <span id="stock1" style="color:#0B0D8C; font-size: 1rem;">0.00（0.00%）</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</article>
<script src="assets/libs/jquery.min.js"></script>
<script src="assets/libs/bootstrap.min.js"></script>
<script>
    $(function () {
        getPowerAmount();
        getStock();
        function getPowerAmount(){
            $.ajax({
                type: "get",
                contentType: "json",
                data: "",
                url: "http://10.15.251.126:8080/EchartsCaini/SinglePowAction",
                success: function (data, state, jqxhr) {
                    $("#p1").html(data.EPW);
                    $("#p11").html(data.HPW);
                    $("#p2").html(data.BSPOW);
                    $("#p22").html(data.BSTPOW);
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }
        function getStock(){
            $.ajax({
                type: "get",
                contentType: "json",
                data: "",
                url: "http://10.15.21.51/WebDataCaini/StockDataAction?code=sh601985",
                success: function (data, state, jqxhr) {
                    $("#stock").html(data[0][3]);
                },
                error: function (err) {
                    console.log(err);
                }
            });
        }

        getPower();
        var currenIndex = 0;
        function getPower(){
            // var currenIndex = 0;
            var dat = new Date();
            var formateDat = "";
            formateDat = dat.getFullYear() + "-"+ (dat.getMonth()+1)+"-"+ dat.getDate();
            document.getElementById("iframess").innerHTML='<div style="width: 50rem; height: 30rem;">' +
            '<iframe src="http://10.15.252.238:8888/EchartsCaini/ProdDataAction?strdate='+formateDat+'&rid=1"  width="100%" height="495px" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>' +
            '</div>';
        }
        
        $("#comPortalNav").hover(function (ev) {
            $(this.querySelector(".nav-panel")).show();
        }, function () {
            $(this.querySelector(".nav-panel")).hide();
        });
        $("#depPortalNav").hover(function (ev) {
            $(this.querySelector(".nav-panel")).show();
        }, function () {
            $(this.querySelector(".nav-panel")).hide();
        });
        $("#location").on("click","li",function(ev){
            var id = $("#location").find(this).attr("name");
            $("#location").find("li").each(function(){
                this.style.backgroundColor="#B4D6EF";
                this.style.color="black";
                if($(this).attr("name")==id){
                    this.style.backgroundColor="#00a2e5";
                    this.style.color="#FFFFFF";
                }
            });
            var d = new Date();
            var formateDate = "";
            formateDate = d.getFullYear() + "-"+ (d.getMonth()+1)+"-"+ d.getDate();
            document.getElementById("iframess").innerHTML='<div style="width: 50rem; height: 30rem;">' +
            '<iframe src="http://10.15.252.238:8888/EchartsCaini/ProdDataAction?strdate='+formateDate+'&rid='+
            id+'"  width="100%" height="495px" frameborder="no" border="0" marginwidth="0" marginheight="0" scrolling="no"></iframe>' +
            '</div>';
        });
        $("#goingUp").click(function(ev){
                if(currenIndex==0){
                    $("#location").find("li").each(function(){
                        if($(this).attr("name")<6){
                            this.style.display="none";
                        }else if(($(this).attr("name")>=6) && ($(this).attr("name")<=10)){
                            this.style.display="block";
                        }
                    })
                    currenIndex++;
                }else if(currenIndex==1){
                    $("#location").find("li").each(function(){
                        if($(this).attr("name")<=9){
                            this.style.display="none";
                        }else {
                            this.style.display = "block";
                        }
                    })
                    currenIndex++;
                }
        });
        $("#goingDown").click(function(ev){
            if(currenIndex==2){
                $("#location").find("li").each(function(){
                    if($(this).attr("name")<6){
                        this.style.display="none";
                    }else if(($(this).attr("name")>=6) && ($(this).attr("name")<=10)){
                        this.style.display="block";
                    }
                })
                currenIndex--;
            }else if(currenIndex==1){
                $("#location").find("li").each(function(){
                    if($(this).attr("name")<=9){
                        this.style.display="none";
                    }else {
                        this.style.display = "block";
                    }
                })
                currenIndex--;
            }
        });
    });
</script>
</body>
</html>